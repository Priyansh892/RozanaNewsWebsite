<div class="register-container">
  <div class="register-box">
    <div class="register-image">
      <img [src]="newsLoginImage" alt="Register Image">
    </div>
    <div class="register-form">
      <h2>Register to Poll</h2>
      <form (ngSubmit)="onSubmit(registerForm)" #registerForm="ngForm" novalidate>
        <!-- Username Field -->
        <div class="form-group">
          <label for="username">Username</label>
          <input
            type="text"
            id="username"
            class="form-control"
            placeholder="Enter your username"
            [(ngModel)]="username"
            name="username"
            #usernameField="ngModel"
            [ngClass]="{'is-invalid': submitted && usernameField.invalid}"
            required
            minlength="3"
          />
          <div *ngIf="submitted && usernameField.invalid" class="invalid-feedback">
            <div *ngIf="usernameField.errors?.['required']">Username is required.</div>
            <div *ngIf="usernameField.errors?.['minlength']">Username must be at least 3 characters long.</div>
          </div>
        </div>
        <!-- Email Field -->
        <div class="form-group input-icon">
          <label for="email">Email</label>
          <input
            type="email"
            id="email"
            class="form-control"
            placeholder="Enter your email id"
            [(ngModel)]="email"
            name="email"
            #emailField="ngModel"
            [ngClass]="{'is-invalid': submitted && emailField.invalid}"
            required
            email
          />
          <div *ngIf="submitted && emailField.invalid" class="invalid-feedback">
            <div *ngIf="emailField.errors?.['required']">Email is required.</div>
            <div *ngIf="emailField.errors?.['email']">Invalid email format.</div>
          </div>
        </div>
        <!-- Password Field -->
        <div class="form-group">
          <label for="password">Password</label>
          <input
            type="password"
            id="password"
            placeholder="Enter your secured password"
            class="form-control"
            [(ngModel)]="password"
            name="password"
            #passwordField="ngModel"
            [ngClass]="{'is-invalid': submitted && passwordField.invalid}"
            required
            minlength="6"
          />
          <div *ngIf="submitted && passwordField.invalid" class="invalid-feedback">
            <div *ngIf="passwordField.errors?.['required']">Password is required.</div>
            <div *ngIf="passwordField.errors?.['minlength']">Password must be at least 6 characters long.</div>
          </div>
        </div>
        <!-- Re-enter Password Field -->
        <div class="form-group">
          <label for="confirmPassword">Re-enter Password</label>
          <input
            type="password"
            id="confirmPassword"
            placeholder="Re-enter your secured password"
            class="form-control"
            [(ngModel)]="confirmPassword"
            name="confirmPassword"
            #confirmPasswordField="ngModel"
            [ngClass]="{'is-invalid': submitted && (confirmPasswordField.invalid || passwordMismatch)}"
            required
            minlength="6"
          />
          <div *ngIf="submitted && (confirmPasswordField.invalid || passwordMismatch)" class="invalid-feedback">
            <div *ngIf="confirmPasswordField.errors?.['required']">Please re-enter your password.</div>
            <div *ngIf="confirmPasswordField.errors?.['minlength']">Re-entered password must be at least 6 characters long.</div>
            <div *ngIf="passwordMismatch">Passwords do not match.</div>
          </div>
        </div>
        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary">Register</button>

        <!-- Sign In Link -->
        <div class="sign-in-link">
          <p>Already have an account? <a (click)="redirectToLogin()">Sign in</a></p>
        </div>
      </form>

      <!-- Display success or error messages -->
      <div [ngClass]="alertClass" role="alert" *ngIf="registrationSuccess || registrationError">
        <div *ngIf="registrationSuccess">Registration successful! Redirecting...</div>
        <div *ngIf="registrationError">{{ registrationError }}</div>
      </div>
    </div>
  </div>
</div>
